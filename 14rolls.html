<link href="kanbun.css" rel="stylesheet" />
<script src="kanbun.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<style>
  div.content {
    font-size: 20px;
    height: 30em;
  }
  div.box{
    background: #F5F6CE;
    border: 1px solid #999;
 }
</style>

<div class="kanbun betagumi okurigana-sinking content box" id="container">
  <p>日本書紀　巻第十四 dummy</p>
  <p>大(おほ)泊(はつ)瀬(せ)幼(わか)武(たけるの)天(すめら)皇(みこと)</p>
  <p>大泊瀬幼武天皇、雄(を)朝(あさ)津(つ)間(ま)稚(わく)子(ごの)宿(すく)禰(ねの)天(すめら)皇(みこと)第五子也。天皇、産(あ)レマシテ而神(しん)光(くわう)滿テリ[レ]殿(おおほとの)ニ、長(ひととな)リテ而伉(かう)健(けん)ニマシマスコト過ギタリ[レ]人(ひと)に。</p>
</div>
<script>
  function getText(){
    alert('000');
    axios.get('https://wanofuhito.github.io/nihon-shoki/14rolls.txt');
    alert('111');
    .then(response => {
      console.log(response.data);
      alert('222');
    })
    .catch(error => {
      alert('333')
      alert(error)
      console.error(error);
    })
    .finally(() => {
    // skip
    });
    alert('444');
    alert(response.data);
    contentsArray = response.data;
    alert(contentsArray);
    return contentsArray
  /*_
   contentsArray = [
    "日本書紀　巻第十四\n",
    "大(おほ)泊(はつ)瀬(せ)幼(わか)武(たけるの)天(すめら)皇(みこと)\n",
    "大泊瀬幼武天皇、雄(を)朝(あさ)津(つ)間(ま)稚(わく)子(ごの)宿(すく)禰(ねの)天(すめら)皇(みこと)第五子也。天皇、産(あ)レマシテ而神(しん)光(くわう)滿テリ[レ]殿(おおほとの)ニ、長(ひととな)リテ而伉(かう)健(けん)ニマシマスコト過ギタリ[レ]人(ひと)に。\",
  ].join("\n")
  */
  }
 function convert() {
    alert('AAA');
    contentsArray = getText();
    alert('BBB');
    new_contentsArray = "<p>" + contentsArray.replace(/\n/g, "</p><p>") + "</p>";
    document.getElementById("container").textContent =  new_contentsArray;
  }
  //convert();
  alert('ZZZ');
  convert();
  alert('YYY');
  convertKanbunDiv(document.getElementById("container"));
</script>

